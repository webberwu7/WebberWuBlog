<!doctype html>
<html lang="zh-tw">
  <head>
    <title>Wordpress 開發環境 // webber 筆記本</title>
    <link rel="shortcut icon" href="favicon.png" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="webber" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://webberwu7.github.io/WebberWuBlog/css/main.min.4a7ec8660f9a44b08c4da97c5f2e31b1192df1d4d0322e65c0dbbc6ecb1b863f.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Wordpress 開發環境"/>
<meta name="twitter:description" content="Wordpress WordPress是一個以PHP和MySQL為平台的自由開源的部落格軟體和內容管理系統
WordPress具有外掛程式架構和模板系統
方便使用者開發客製化功能外掛和精美的主題模板
那麼如果要開發外掛或主題，就需要一個wordpress環境
今天這篇會紀錄如何在 Mac 系統中使用 docker 建立一個地端的 wordpress
使用 docker-compose 一次將需要的服務啟動 如上面所描述的 wordpress 是以 php 和 mysql 為平台建置而成的
因此我們需要一個 mysql服務 和一個有php的網站建設
mysql服務 使用官方提供的 mysql:5.7
並且設定好連線的使用者帳號密碼與建立資料庫
wordpress 服務 使用官方提供的 wordpress:6.0.0-php8.0-apache (REF: wordpress docker hub)
未來如果 wordpress 要升級，可參考官方 tag 改成目標版本號
php 版本目前使用 8.0 如果未來要升級，可參考官方 tag 改成目標版本號
version: &#39;3.3&#39; services: db: image: mysql:5.7 restart: always environment: - MYSQL_DATABASE=wordpress-example - MYSQL_USER=wpExampleUser - MYSQL_PASSWORD=KhcwtBvD5ygAu - MYSQL_ROOT_PASSWORD=ybcM8Wrhr4MqX9ZpsWkQgdGH4NMghNcq - TZ=UTC ports: - 33060:3306 volumes: - ."/>

    <meta property="og:title" content="Wordpress 開發環境" />
<meta property="og:description" content="Wordpress WordPress是一個以PHP和MySQL為平台的自由開源的部落格軟體和內容管理系統
WordPress具有外掛程式架構和模板系統
方便使用者開發客製化功能外掛和精美的主題模板
那麼如果要開發外掛或主題，就需要一個wordpress環境
今天這篇會紀錄如何在 Mac 系統中使用 docker 建立一個地端的 wordpress
使用 docker-compose 一次將需要的服務啟動 如上面所描述的 wordpress 是以 php 和 mysql 為平台建置而成的
因此我們需要一個 mysql服務 和一個有php的網站建設
mysql服務 使用官方提供的 mysql:5.7
並且設定好連線的使用者帳號密碼與建立資料庫
wordpress 服務 使用官方提供的 wordpress:6.0.0-php8.0-apache (REF: wordpress docker hub)
未來如果 wordpress 要升級，可參考官方 tag 改成目標版本號
php 版本目前使用 8.0 如果未來要升級，可參考官方 tag 改成目標版本號
version: &#39;3.3&#39; services: db: image: mysql:5.7 restart: always environment: - MYSQL_DATABASE=wordpress-example - MYSQL_USER=wpExampleUser - MYSQL_PASSWORD=KhcwtBvD5ygAu - MYSQL_ROOT_PASSWORD=ybcM8Wrhr4MqX9ZpsWkQgdGH4NMghNcq - TZ=UTC ports: - 33060:3306 volumes: - ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://webberwu7.github.io/WebberWuBlog/posts/20220916-develop-wordpress/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-16T11:25:16+08:00" />
<meta property="article:modified_time" content="2022-09-16T11:25:16+08:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://webberwu7.github.io/WebberWuBlog"><img class="app-header-avatar" src="/WebberWuBlog/images/avatar.jpg" alt="webber" /></a>
      <h1>webber 筆記本</h1>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/WebberWuBlog/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/WebberWuBlog/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/WebberWuBlog/about/">About</a>
      </nav>
      <p>目前是一名後端工程師</p>
      <div class="app-header-social">
        
          <a href="https://github.com/webberwu7" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>My Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Wordpress 開發環境</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Sep 16, 2022
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://webberwu7.github.io/WebberWuBlog/tags/wordpress/">wordpress</a>
              <a class="tag" href="https://webberwu7.github.io/WebberWuBlog/tags/docker/">docker</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="wordpress">Wordpress</h1>
<p>WordPress是一個以PHP和MySQL為平台的自由開源的部落格軟體和內容管理系統</p>
<p>WordPress具有外掛程式架構和模板系統</p>
<p>方便使用者開發客製化功能外掛和精美的主題模板</p>
<p>那麼如果要開發外掛或主題，就需要一個wordpress環境</p>
<p>今天這篇會紀錄如何在 Mac 系統中使用 docker 建立一個地端的 wordpress</p>
<h2 id="使用-docker-compose-一次將需要的服務啟動">使用 docker-compose 一次將需要的服務啟動</h2>
<p>如上面所描述的 wordpress 是以 php 和 mysql 為平台建置而成的</p>
<p>因此我們需要一個 mysql服務 和一個有php的網站建設</p>
<ul>
<li>
<p>mysql服務
使用官方提供的 mysql:5.7</p>
<p>並且設定好連線的使用者帳號密碼與建立資料庫</p>
</li>
<li>
<p>wordpress 服務
使用官方提供的 wordpress:6.0.0-php8.0-apache    (<a href="https://hub.docker.com/_/wordpress">REF: wordpress docker hub</a>)</p>
<p>未來如果 wordpress 要升級，可參考官方 tag 改成目標版本號</p>
<p>php 版本目前使用 8.0 如果未來要升級，可參考官方 tag 改成目標版本號</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#39;3.3&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">db</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">mysql:5.7</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">MYSQL_DATABASE=wordpress-example</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">MYSQL_USER=wpExampleUser</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">MYSQL_PASSWORD=KhcwtBvD5ygAu</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">MYSQL_ROOT_PASSWORD=ybcM8Wrhr4MqX9ZpsWkQgdGH4NMghNcq</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">TZ=UTC</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">33060</span>:<span style="color:#ae81ff">3306</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./.db/data/mysql:/var/lib/mysql</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">wordpress</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">db</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wordpress:6.0.0-php8.0-apache</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;8000:80&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_NAME</span>: <span style="color:#ae81ff">wordpress-example</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_HOST</span>: <span style="color:#ae81ff">db:3306</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_USER</span>: <span style="color:#ae81ff">wpExampleUser</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_PASSWORD</span>: <span style="color:#ae81ff">KhcwtBvD5ygAu</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./.wordpress:/var/www/html</span>
</span></span></code></pre></div><p>寫好docker-compose後下指令啟動</p>
<pre tabindex="0"><code>docker-compose up
</code></pre><p>如果順利啟動的話就會看到 wordpress 的引導安裝介面了</p>
<p><img src="https://imgur.com/O2193uv.png" alt="image"></p>
<p><img src="https://imgur.com/lTYDKjX.png" alt="image"></p>
<p>安裝完成登入後，就能看到wordpress的後台介面囉</p>
<p><img src="https://imgur.com/LCTH28q.png" alt="image"></p>
<h2 id="將開發的插件放入目前運行中的-wordpress">將開發的插件放入目前運行中的 wordpress</h2>
<p>在docker-compose中有使用 volume 功能</p>
<p>所以可以將docker容器中的位置對照出來外面</p>
<p>設定是放在目前位置下的 .wordpress 資料夾中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./.wordpress:/var/www/html</span>
</span></span></code></pre></div><p>目前的資料夾結構</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>├── db
</span></span><span style="display:flex;"><span>│   └── data
</span></span><span style="display:flex;"><span>├── wordpress
</span></span><span style="display:flex;"><span>│   ├── wp-admin
</span></span><span style="display:flex;"><span>│   ├── wp-content
</span></span><span style="display:flex;"><span>│   ├── wp-includes
</span></span><span style="display:flex;"><span>│   ├── index.php
</span></span><span style="display:flex;"><span>│   ├── license.txt
</span></span><span style="display:flex;"><span>│   ├── readme.html
</span></span><span style="display:flex;"><span>│   ├── wp-activate.php
</span></span><span style="display:flex;"><span>│   ├── wp-blog-header.php
</span></span><span style="display:flex;"><span>│   ├── wp-comments-post.php
</span></span><span style="display:flex;"><span>│   ├── wp-config-docker.php
</span></span><span style="display:flex;"><span>│   ├── wp-config-sample.php
</span></span><span style="display:flex;"><span>│   ├── wp-config.php
</span></span><span style="display:flex;"><span>│   ├── wp-cron.php
</span></span><span style="display:flex;"><span>│   ├── wp-links-opml.php
</span></span><span style="display:flex;"><span>│   ├── wp-load.php
</span></span><span style="display:flex;"><span>│   ├── wp-login.php
</span></span><span style="display:flex;"><span>│   ├── wp-mail.php
</span></span><span style="display:flex;"><span>│   ├── wp-settings.php
</span></span><span style="display:flex;"><span>│   ├── wp-signup.php
</span></span><span style="display:flex;"><span>│   ├── wp-trackback.php
</span></span><span style="display:flex;"><span>│   └── xmlrpc.php
</span></span><span style="display:flex;"><span>├── LICENSE
</span></span><span style="display:flex;"><span>├── README.md
</span></span><span style="display:flex;"><span>└── docker-compose.yml
</span></span></code></pre></div><p>wordpress 的插件會安裝在 wp-content -&gt; plugins 中</p>
<p>所以將開發的插件複製到這個位置他就會同步至 wordpress 然後自動讀取</p>
<p>例如： 我們可以將 <a href="/WebberWuBlog/posts/202220915-develop-wordpress-plugin">wordpress 插件開發筆記 (1) - 第一個插件</a> 開發的插件加入其中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>├── wordpress
</span></span><span style="display:flex;"><span>    ├── wp-admin
</span></span><span style="display:flex;"><span>    └── wp-content
</span></span><span style="display:flex;"><span>        └── plugins 
</span></span><span style="display:flex;"><span>            └── my-plugin 
</span></span></code></pre></div><p>就可以看到wordpress的插件列表中出現我們自行開發的插件了</p>
<p><img src="https://imgur.com/DyS7djk.png" alt="image"></p>
<h2 id="wp-cli">WP-CLI</h2>
<p>WP-CLI是 WordPress 的官方命令行界面。
它可以讓你從終端機的介面下指令來快速管理 WordPress網站 、網站主題、網站插件等等。
這通常是當你 WordPress網站設計 玩到一定的程度之後會開始摸索研究的軟體，讓你晉升高級 WordPress網頁設計師，更便捷快速的管理你的 WordPress網站。</p>
<p>REF: <a href="https://raise-up.com.tw/wordpress-tutorial/wp-cli-introduction.html/">https://raise-up.com.tw/wordpress-tutorial/wp-cli-introduction.html/</a></p>
<p>可是使用了 docker-compose 要如何自動執行wp-cli呢？</p>
<p>因此要在 <code>docker-compose.yaml</code> 中加入 wordpress-cli 的服務去執行他</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">wordpress-cli</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">db</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">wordpress</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">user</span>: <span style="color:#e6db74">&#34;33:33&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wordpress:cli</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_NAME</span>: <span style="color:#ae81ff">wordpress-example</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_HOST</span>: <span style="color:#ae81ff">db:3306</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_USER</span>: <span style="color:#ae81ff">wpExampleUser</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">WORDPRESS_DB_PASSWORD</span>: <span style="color:#ae81ff">KhcwtBvD5ygAu</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">command</span>: &gt;<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      /bin/sh -c &#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      sleep 10;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      wp core install --path=/var/www/html \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      --url=&#34;http://localhost:8000&#34; \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      --title=&#34;wordpress-example&#34; \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      --admin_user=wpExampleUser \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      --admin_password=wpExampleUser \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      --admin_email=wp.example@example.com;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      wp theme install colormag --activate --allow-root;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      wp plugin install aryo-activity-log --activate --allow-root;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#39;</span>      
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./.wordpress:/var/www/html</span>
</span></span></code></pre></div><p>這裡我簡單寫下兩個指令</p>
<ol>
<li>wp core install   : 安裝wordpress 並設定網址,標題和管理員等資料</li>
<li>wp theme install  : 安裝wordpress主題</li>
<li>wp plugin install : 安裝wordpress插件</li>
</ol>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
